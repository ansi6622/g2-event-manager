
<% if flash[:notice] %>
  <ul class="flashes">
    <% flash.each do |msg| %>
      <li class="<%= msg[0] %>"><%= msg[1] %></li>
    <% end %>
  </ul>
<% end %>
<div class="event">

  <div class="date">
    <div class="day"><strong><%= @event.date.strftime('%a') %></strong></div>
    <div class="day"><%= @event.date.strftime('%b %d') %></div>
  </div>
  <div class="event_info">
    <div class="title"><strong><%= @event.name %></strong></div>
    <div class="time"><strong>When</strong>: <%= @event.date.strftime('%b %d, %Y') %> at 7:00AM</div>
    <div class="description"><%= @event.description %></div>
    <div class="location"><%= @event.location %></div>
    <div class="category"><%= @event.category %></div>
  </div>

  <div class="event_buttons">
    <% if @user %>
      <div class="capacity">Capacity: <%= @event.capacity %></div>
    <% end %>

    <% if @user && @event.user_id == @user.id %>
      <%= link_to 'Edit this Event', edit_event_path(@event) %>

      <%= link_to 'Delete this Event', @event, method: :delete %>
    <% elsif @user && !@user.attendances.include?(@event) && @event.capacity > 0 %>
      <%= link_to 'RSVP for this Event', register_event_path(@event), method: :post %>
    <% elsif @user && !@user.attended_events.include?(@event) && !@user.waitlisted_events.include?(@event) && @event.capacity == 0 %>
      <%= link_to 'Add me to Wait List', register_event_path(@event), method: :post %>
    <% elsif @user && @user.waitlisted_events.include?(@event) %>
      <%= link_to 'Remove me from Wait List', unregister_event_path(@event), method: :post %>
    <% end %>
  </div>

</div>